<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라이어 게임</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* 간단한 애니메이션 효과 */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        /* 선택된 버튼 스타일 */
        .topic-btn.selected {
            background-color: #3B82F6; /* blue-600 */
            color: white;
            border-color: #3B82F6;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div id="app" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full max-w-lg transition-all duration-500">

        <!-- 1. 설정 화면 -->
        <div id="setup-screen" class="fade-in">
            <div class="text-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800">라이어 게임 🤥</h1>
                <p class="text-gray-500 mt-2">라이어를 찾아내세요!</p>
            </div>

            <!-- 인원 설정 -->
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="player-count" class="block text-sm font-medium text-gray-700 mb-2">참가 인원</label>
                    <input type="number" id="player-count" value="4" min="3" max="10" class="w-full bg-gray-50 border border-gray-300 rounded-lg p-3 text-center text-gray-800 focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="wolf-count" class="block text-sm font-medium text-gray-700 mb-2">라이어 수</label>
                    <input type="number" id="wolf-count" value="1" min="1" max="5" class="w-full bg-gray-50 border border-gray-300 rounded-lg p-3 text-center text-gray-800 focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- 주제 선택 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">주제 선택</label>
                <div id="topic-container" class="grid grid-cols-2 sm:grid-cols-5 gap-2">
                    <!-- 주제 버튼은 JS로 생성 -->
                </div>
            </div>
            
            <button id="start-game-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 ease-in-out transform hover:-translate-y-0.5 shadow-md">
                게임 시작
            </button>
            <p id="error-message" class="text-red-500 text-sm text-center mt-2 h-4"></p>
        </div>

        <!-- 2. 게임 진행 화면 -->
        <div id="game-screen" class="hidden fade-in">
            <div class="text-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800">단어 확인</h1>
                <p class="text-gray-500 mt-2">자신의 번호를 눌러 단어를 확인하세요.</p>
            </div>
            <div id="player-buttons" class="grid grid-cols-3 sm:grid-cols-4 gap-4">
                <!-- 플레이어 버튼 생성 -->
            </div>
            <button id="show-result-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition mt-6 shadow-md" disabled>
                결과 보기
            </button>
        </div>

        <!-- 3. 결과 화면 -->
        <div id="result-screen" class="hidden fade-in text-center">
             <h1 class="text-2xl font-bold text-gray-800 mb-4">게임 결과</h1>
             <div class="bg-gray-50 p-6 rounded-lg">
                 <p class="text-lg mb-2">라이어는 <span id="wolf-players" class="font-bold text-red-500"></span>번 이었습니다!</p>
                 <div class="space-y-2 text-xl">
                     <p> 시민 단어: <span id="citizen-word" class="font-bold text-blue-600"></span></p>
                     <p> 라이어 단어: <span id="wolf-word" class="font-bold text-red-600"></span></p>
                 </div>
             </div>
             <button id="restart-game-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition mt-6 shadow-md">
                새 게임
             </button>
        </div>

        <!-- 단어 확인 모달 -->
        <div id="word-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl p-8 text-center max-w-sm w-full">
                <p class="text-lg mb-2">당신의 단어는...</p>
                <p id="modal-word" class="text-4xl font-bold my-4"></p>
                <button id="close-modal-btn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg transition">
                    확인했습니다
                </button>
            </div>
        </div>

    </div>

    <script>
        // [수정됨] 단어 데이터를 {citizen, wolf} 쌍 구조에서, 연관 단어 목록 구조로 변경
        const wordsData = {
            '음식': ['🍜 짜장면', '🍜 짬뽕', '🥘 김치찌개', '🥘 된장찌개', '🍕 피자', '🍔 햄버거', '🍢 떡볶이', '🍢 순대', '🍥 라면', '🍜 우동', '🍎 사과', '🍐 배', '🥤 콜라', '🥤 사이다', '🍗 치킨', '🍗 닭강정', '🥓 삼겹살', '🥓 목살', '🍣 초밥', '🍣 회', '🍜 냉면', '🍜 막국수', '☕ 아메리카노', '☕ 라떼', '🍧 팥빙수', '🍧 과일빙수', '🥟 만두', '🥟 찐빵', '🍚 비빔밥', '🍚 볶음밥', '🥩 스테이크', '🥩 돈까스', '🍛 카레', '🍛 짜장', '🥪 샌드위치', '🥪 토스트', '🍦 아이스크림', '🍨 샤베트', '🍲 샤브샤브', '🍲 스키야키', '🍙 김밥', '🍙 주먹밥', '🍰 케이크', '🥧 파이', '🍮 푸딩', '🍮 젤리', '🍩 도넛', '🍩 꽈배기'],
            '직업': ['👨‍⚕️ 의사', '👩‍⚕️ 간호사', '👮‍♀️ 경찰', '👨‍🚒 소방관', '👩‍🏫 선생님', '👨‍🏫 교수', '💻 개발자', '🎨 디자이너', '🎤 가수', '🎬 배우', '👨‍🍳 요리사', '🧑‍🍳 제빵사', '⚽ 운동선수', ' 감독', '✍️ 작가', '📰 기자', '✈️ 파일럿', '👩‍✈️ 승무원', '💇‍♀️ 미용사', '💅 네일리스트', '⚖️ 판사', '⚖️ 검사', '🏠 건축가', '🛋️ 인테리어 디자이너', '🎩 마술사', '🎪 서커스 단원', '💊 약사', ' veterinário', '🎙️ 성우', '📢 아나운서', '📹 유튜버', '📹 BJ', '💃 모델', '🕺 패션 디자이너', '🎖️ 군인', '💂 경호원', '🎨 화가', '🗿 조각가', '🏛️ 대통령', '🏛️ 국회의원', '🧑‍🌾 농부', '漁師', '📜 변호사', '📜 법무사', '☕ 바리스타', '🍷 소믈리에', '🔭 천문학자', '✨ 점성술사'],
            '전자제품': ['📱 스마트폰', '📱 태블릿', '💻 노트북', '🖥️ 데스크탑', '📺 TV', '🖥️ 모니터', '💨 에어컨', '💨 선풍기', '🧺 세탁기', '🧺 건조기', '🧊 냉장고', '🧊 김치냉장고', '📷 카메라', '📹 캠코더', '🎧 헤드폰', '🎧 이어폰', '🖱️ 마우스', '⌨️ 키보드', '🔊 스피커', '🔊 사운드바', '🔥 전자레인지', '🔥 오븐', '🧹 청소기', '🤖 로봇청소기', '🖨️ 프린터', '📠 스캐너', '🚁 드론', '🚗 RC카', '🍚 전기밥솥', '🍚 압력밥솥', '🥤 믹서기', '🥤 착즙기', '🌬️ 공기청정기', '💧 가습기', '📽️ 빔프로젝터', '📺 스크린', '⌚ 스마트워치', '⌚ 스마트밴드', '💈 전기면도기', '💈 헤어드라이어', '🔋 보조배터리', '🔌 충전기', '🛌 전기장판', '🛌 온수매트', '🎮 게임기', '🕶️ VR기기', '🚗 내비게이션', '🚗 블랙박스'],
            '동물': ['🐶 강아지', '🐱 고양이', '🐯 호랑이', '🦁 사자', '🐘 코끼리', '🦒 기린', '🐰 토끼', '🐢 거북이', '🐬 돌고래', '🐳 고래', '🐔 닭', '🦆 오리', '🐑 양', '🐐 염소', '🐼 팬더', '🐻 곰', '🐧 펭귄', '🐻‍❄️ 북극곰', '🐒 원숭이', '🦍 침팬지', '🐍 뱀', '🦎 도마뱀', '🦅 독수리', '🦅 매', '🐊 악어', '🦛 하마', '🦌 사슴', '🦌 노루', '🦈 상어', '🦈 가오리', '🐿️ 다람쥐', '🐿️ 청설모', '🦊 여우', '🐺 늑대', '🦘 캥거루', '🐨 코알라', '🕷️ 거미', '🦂 전갈', '🦋 나비', '🦋 나방', '🐹 햄스터', '🐹 기니피그', '🐸 개구리', '🐸 두꺼비', '🐴 말', '🦓 얼룩말', '🐫 낙타', '🦙 라마'],
            '스포츠': ['⚽ 축구', '⚾ 야구', '🏀 농구', '🏐 배구', '🏊‍♀️ 수영', '🏃‍♀️ 달리기', '🎾 테니스', '🏸 배드민턴', '🎿 스키', '🏂 스노보드', '🏹 양궁', '🔫 사격', '🥋 태권도', '🥋 유도', '🥊 복싱', '🤼 레슬링', '⛳ 골프', '🏒 하키', '🎳 볼링', '🎱 당구', '🏄 서핑', '🛶 카누', '🚴 사이클', '🏃 마라톤', '🤸‍♀️ 체조', '⛸️ 피겨스케이팅', '🤺 펜싱', '🤺 검도', '🧗 클라이밍', '🧗 등산', '🏓 탁구', '🏸 스쿼시', '🏋️ 역도', '🤼 씨름', '🥌 컬링', '🏒 아이스하키', '🏉 럭비', '🏈 미식축구', '🏎️ F1', '🏎️ 나스카', '🏇 승마', '🏇 폴로', '🥅 핸드볼', '🥅 족구', '⛸️ 스케이트', '⛸️ 인라인', '🌊 다이빙', '👯‍♀️ 싱크로나이즈'],
            '장소': ['🏫 학교', '🏫 학원', '🏞️ 바다', '🏞️ 산', '🏬 백화점', '🏬 시장', '🎬 영화관', '🎭 공연장', '📚 도서관', '📚 서점', '🏥 병원', '💊 약국', '✈️ 공항', '🚉 기차역', '☕ 카페', '🥐 빵집', '🚓 경찰서', '🚒 소방서', '🏛️ 박물관', '🎨 미술관', '🎢 놀이공원', '🌊 워터파크', '💪 헬스장', '🏊 수영장', '🏪 편의점', '🛒 슈퍼마켓', '🏦 은행', '🏣 우체국', '📡 방송국', '📰 신문사', '⛽ 주유소', '⚡ 충전소', '💇 미용실', '💈 이발소', '🏨 호텔', '🏩 모텔', '🏢 아파트', '🏡 주택', '🍴 식당', '🍽️ 레스토랑', '🚇 지하철', '🚌 버스', '🌳 공원', '🏟️ 운동장', '⛪ 교회', '🕍 성당', '⛩️ 절', '⛩️ 신사'],
            '물건': ['🪑 책상', '🪑 의자', '✏️ 연필', '✒️ 볼펜', '👓 안경', '🕶️ 선글라스', '⏰ 시계', '📅 달력', '👜 가방', '👛 지갑', '☂️ 우산', '⛱️ 양산', '🥤 컵', '🥤 텀블러', '🥄 숟가락', '🥢 젓가락', '👟 신발', '🧦 양말', '🧢 모자', '🧤 장갑', '💍 반지', '📿 목걸이', '🧼 비누', '🧴 샴푸', '🪥 치약', '🪥 칫솔', '🛁 수건', '🧻 휴지', '🛋️ 침대', '🛋️ 소파', '🪞 빗', '🪞 거울', '🗑️ 휴지통', '♻️ 분리수거함', '🔑 열쇠', '🔒 자물쇠', '✂️ 가위', '🔪 칼', '🍳 냄비', '🍳 프라이팬', '📺 리모컨', '🔑 스마트키', '😷 마스크', '🧴 손소독제', '🗺️ 국기', '🗺️ 지도', '💰 동전', '💵 지폐'],
            'LOL 챔피언': ['⚔️ 가렌', '⚔️ 다리우스', '✨ 럭스', '✨ 모르가나', '🌪️ 야스오', '🌪️ 요네', '🏹 애쉬', '🏹 바루스', '🛡️ 레오나', '⚓ 노틸러스', '🔫 케이틀린', '🔫 진', '💥 이즈리얼', '💥 카이사', '⛓️ 쓰레쉬', '🤖 블리츠크랭크', '🔪 제드', '🔪 탈론', '💖 아리', '💖 르블랑', '🤺 리븐', '🤺 피오라', '🗿 말파이트', '🐏 오른', '🗡️ 마스터 이', '🗡️ 트린다미어', '🚀 징크스', '🚀 트리스타나', '🦇 베인', '🐀 트위치', '👊 리 신', '👊 신 짜오', '🔥 애니', '🔥 브랜드', '🌟 소라카', '🎵 소나', '🍄 룰루', '🐱 유미', '🔫 미스 포츈', '🔫 루시안', '🔮 베이가', '🔮 신드라', '🌪️ 카타리나', '🌪️ 아칼리', '🔪 이렐리아', '🔪 카밀', '🍄 티모', '🐾 나르', '🐊 나서스', '🐊 레넥톤', '🐻 볼리베어', '🐻 우디르', '🥊 바이', '🥊 세트', '⚓ 파이크', '👻 세나', '🌱 자이라', '🤖 하이머딩거', '🌌 카사딘', '🌌 말자하', '🩸 블라디미르', '🩸 스웨인', '⌛ 에코', '🌙 다이애나', '🦁 렝가', '🦗 카직스', '😈 케인', '😈 아트록스', '🛡️ 쉔', '🛡️ 크산테', '🐺 그레이브즈', '🐺 킨드레드', '💣 오리아나', '💣 직스', '🌊 잔나', '🌊 나미', '🃏 트위스티드 페이트', '🌀 라이즈', '👻 녹턴', '👻 피들스틱', '🤡 샤코', '😈 이블린', '🔨 뽀삐', '🔨 자르반 4세', '🐙 모데카이저', '🐙 일라오이', '🏴‍☠️ 갱플랭크', '🏴‍☠️ 클레드', '🦎 세라핀', '🦎 니코', '🌙 자야', '🌙 아펠리오스', '⚡ 제리', '⚡ 시비르', '👑 벨베스', '👑 비에고', '😭 자크', '😭 아무무', '🐗 그라가스', '🐗 세주아니'],
            'LOL 아이템': ['⚔️ 무한의 대검', '⚔️ 나보리 신속검', '🎩 라바돈의 죽음모자', '🎩 공허의 지팡이', '❤️ 태양불꽃 방패', '❤️ 강철심장', '🛡️ 강철의 솔라리 펜던트', '🛡️ 저녁갑주', '🎭 리안드리의 고뇌', '🎭 루덴의 동반자', '🗡️ 몰락한 왕의 검', '🗡️ 크라켄 학살자', '⏳ 존야의 모래시계', '⏳ 밴시의 장막', '👼 수호 천사', '👼 스테락의 도전', '🛡️ 가시 갑옷', '🛡️ 란두인의 예언', '🌿 대자연의 힘', '🌿 정령의 형상', '👻 요우무의 유령검', '👻 드락사르의 황혼검', '❄️ 칠흑의 양날 도끼', '❄️ 세릴다의 원한', '💚 워모그의 갑옷', '💚 굳건한 심장', '✨ 구원', '✨ 미카엘의 축복', '🔥 폭풍 쇄도', '🔥 그림자불꽃', '🐍 불경한 히드라', '🐍 굶주린 히드라', '🩸 피바라기', '🩸 불멸의 철갑궁', '💀 도미닉 경의 인사', '💀 필멸자의 운명', '💫 우주의 추진력', '💫 리치베인', '🧪 모렐로노미콘', '🧪 화공 펑크 사슬검', '📜 대천사의 지팡이', '📜 영겁의 지팡이', '🧊 얼어붙은 심장', '🧊 얼어붙은 건틀릿', '🤝 기사의 맹세', '🤝 지크의 융합', '🔮 라일라이의 수정홀', '🔮 악의', '🔚 마법사의 최후', '🔚 종말']
        };

        const topics = Object.keys(wordsData);
        topics.push('Random'); // Random 주제 추가

        // DOM Elements
        const setupScreen = document.getElementById('setup-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        const playerCountInput = document.getElementById('player-count');
        const wolfCountInput = document.getElementById('wolf-count');
        const topicContainer = document.getElementById('topic-container');
        const startGameBtn = document.getElementById('start-game-btn');
        const errorMessage = document.getElementById('error-message');
        const playerButtons = document.getElementById('player-buttons');
        const showResultBtn = document.getElementById('show-result-btn');
        const wolfPlayersSpan = document.getElementById('wolf-players');
        const citizenWordSpan = document.getElementById('citizen-word');
        const wolfWordSpan = document.getElementById('wolf-word');
        const restartGameBtn = document.getElementById('restart-game-btn');
        const wordModal = document.getElementById('word-modal');
        const modalWord = document.getElementById('modal-word');
        const closeModalBtn = document.getElementById('close-modal-btn');
        
        let selectedTopic = '';
        let roles = [];
        let wordPair = {};
        let checkedPlayers = 0;
        let playerCount = 0;

        function initialize() {
            // 주제 버튼 생성
            topics.forEach(topic => {
                const button = document.createElement('button');
                button.textContent = topic;
                button.className = 'topic-btn border border-gray-300 rounded-lg py-2 px-1 text-sm sm:text-base text-gray-700 hover:bg-gray-100 transition';
                button.dataset.topic = topic;
                topicContainer.appendChild(button);
            });
            
            // 주제 버튼 클릭 이벤트
            topicContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('topic-btn')) {
                    document.querySelectorAll('.topic-btn').forEach(btn => btn.classList.remove('selected'));
                    e.target.classList.add('selected');
                    selectedTopic = e.target.dataset.topic;
                }
            });

            startGameBtn.addEventListener('click', startGame);
            showResultBtn.addEventListener('click', showResult);
            restartGameBtn.addEventListener('click', restartGame);
            closeModalBtn.addEventListener('click', () => wordModal.classList.add('hidden'));
        }
        
        function validateSettings() {
            const players = parseInt(playerCountInput.value);
            const wolves = parseInt(wolfCountInput.value);
            
            if (!selectedTopic) {
                errorMessage.textContent = '주제를 선택해주세요.';
                return false;
            }
            if (wolves >= players) {
                errorMessage.textContent = '라이어 수는 참가 인원보다 적어야 합니다.';
                return false;
            }
            errorMessage.textContent = '';
            return true;
        }

        function startGame() {
            if (!validateSettings()) return;

            playerCount = parseInt(playerCountInput.value);
            const wolfCount = parseInt(wolfCountInput.value);
            
            // [수정됨] 단어 선택 로직 변경
            let finalTopic = selectedTopic;
            if (finalTopic === 'Random') {
                const realTopics = topics.slice(0, -1); // 'Random' 제외
                finalTopic = realTopics[Math.floor(Math.random() * realTopics.length)];
            }
            const words = wordsData[finalTopic];
            // 원본 배열을 복사하여 사용 (splice로 원본이 변경되는 것을 방지)
            const availableWords = [...words];

            // 1. 시민 단어를 무작위로 선택하고, 목록에서 제거
            const citizenIndex = Math.floor(Math.random() * availableWords.length);
            const citizenWord = availableWords.splice(citizenIndex, 1)[0];

            // 2. 남은 단어 목록에서 라이어 단어를 무작위로 선택
            const wolfIndex = Math.floor(Math.random() * availableWords.length);
            const wolfWord = availableWords[wolfIndex];
            
            wordPair = { citizen: citizenWord, wolf: wolfWord };


            // 역할 분배
            roles = Array(playerCount).fill('citizen');
            let wolvesAssigned = 0;
            while(wolvesAssigned < wolfCount) {
                const randomIndex = Math.floor(Math.random() * playerCount);
                if (roles[randomIndex] === 'citizen') {
                    roles[randomIndex] = 'wolf';
                    wolvesAssigned++;
                }
            }

            // 게임 화면 설정
            setupScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
            
            checkedPlayers = 0;
            showResultBtn.disabled = true;

            playerButtons.innerHTML = '';
            for (let i = 0; i < playerCount; i++) {
                const button = document.createElement('button');
                button.textContent = `${i + 1}번`;
                button.dataset.index = i;
                button.className = 'player-btn bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-6 rounded-lg transition';
                button.addEventListener('click', showWordModal);
                playerButtons.appendChild(button);
            }
        }

        function showWordModal(e) {
            const playerIndex = parseInt(e.target.dataset.index);
            const role = roles[playerIndex];
            const word = role === 'wolf' ? wordPair.wolf : wordPair.citizen;
            
            // [수정됨] 이모지가 단어에 포함되어 있으므로 바로 표시
            modalWord.textContent = word;
            wordModal.classList.remove('hidden');

            e.target.disabled = true;
            e.target.classList.remove('bg-gray-200', 'hover:bg-gray-300');
            e.target.classList.add('bg-indigo-500', 'text-white');
            e.target.textContent = '확인 완료';

            checkedPlayers++;
            if (checkedPlayers === playerCount) {
                showResultBtn.disabled = false;
            }
        }

        function showResult() {
            const wolfIndices = roles.map((role, index) => role === 'wolf' ? index + 1 : null).filter(Boolean);
            wolfPlayersSpan.textContent = wolfIndices.join(', ');

            // [수정됨] 이모지가 단어에 포함되어 있으므로 바로 표시
            citizenWordSpan.textContent = wordPair.citizen;
            wolfWordSpan.textContent = wordPair.wolf;
            
            gameScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
        }

        function restartGame() {
            resultScreen.classList.add('hidden');
            setupScreen.classList.remove('hidden');
            
            selectedTopic = '';
            document.querySelectorAll('.topic-btn').forEach(btn => btn.classList.remove('selected'));
            errorMessage.textContent = '';
        }

        initialize();
    </script>
</body>
</html>
